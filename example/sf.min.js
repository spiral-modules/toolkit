!function e(t,s,o){function n(a,i){if(!s[a]){if(!t[a]){var c="function"==typeof require&&require;if(!i&&c)return c(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=s[a]={exports:{}};t[a][0].call(u.exports,function(e){var s=t[a][1][e];return n(s?s:e)},u,u.exports,e,t,s,o)}return s[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(e,t,s){"use strict";var o=e("../helpers/tools"),n=e("../core/Events"),r=e("../helpers/LikeFormData"),a=function(e){this.currentRequests=0,this.events=new n(["beforeSend","load"]),e&&e.headers&&(this.headers=o.extend(this.headers,e.headers))};a.prototype.headers={"X-Requested-With":"XMLHttpRequest"},a.prototype.send=function(e){var t=this;(null===e.data||void 0===e.data||"undefined"===e.data)&&(e.data=null),e.method||(e.method="POST"),e.headers=e.headers?o.extend(this.headers,e.headers):this.headers;var s,n=new Promise(function(o,n){e.url||(console.error("You should provide url"),n("You should provide url")),t.currentRequests++;var a=!1;"undefined"!=typeof window&&window.XDomainRequest&&window.XMLHttpRequest&&void 0===(new XMLHttpRequest).responseType&&0===url.indexOf("http")?(s=new XDomainRequest,a=!0,s.onprogress=function(t){e.onProgress&&e.onProgress(t)}):(s=new XMLHttpRequest,e.onProgress&&s.upload.addEventListener("progress",function(t){t.lengthComputable&&e.onProgress(t.loaded,t.total)},!1)),s.open(e.method,e.url),s.onload=function(){t.currentRequests--;var r=t._parseJSON(s);r.status?r.status>199&&r.status<300?o(r):r.status>399&&r.status<600?n(r):(console.error("unknown status %d. Rejecting",r.status),n(r)):a?o(r):n(r),e.response=r,t.events.trigger("load",e)},s.onerror=function(){t.currentRequests--,n(Error("Network Error"),s)},t.events.trigger("beforeSend",e);var i;null!==e.data?a?i="IEJSON"+JSON.stringify(e.data):(-1!==e.data.toString().indexOf("FormData")?i=e.data:(i=new r(e.data),e.headers["content-type"]=i.getContentTypeHeader()),t._setHeaders(s,e.headers)):i=null;try{s.send(i)}catch(c){s.send(i.toString())}return s});return e.isReturnXHRToo?[n,s]:n},a.prototype.sendRequest=a.prototype.send,a.prototype._setHeaders=function(e,t){for(var s in t)e.setRequestHeader(s,t[s])},a.prototype._parseJSON=function(e){e.response||(e.response=e.responseText);var t={},s=!1;if(e.getResponseHeader&&(s=e.getResponseHeader("Content-Type")),s&&"application/json"!==s.toLowerCase()&&"text/json"!==s.toLowerCase()&&"inode/symlink"!==s.toLowerCase())t={data:e.response};else try{t=JSON.parse(e.response)}catch(o){console.error("Not a JSON!",e.response),t={data:e.response}}return t.status||(t.status=e.status),"string"==typeof t.status&&0===t.status.indexOf("HTTP/")&&t.status.match(/ (\d\d\d)/)&&(t.status=parseInt(t.status.match(/ (\d\d\d)/)[1])),t.statusText||(t.statusText=e.statusText),e.status&&e.status!=t.status&&console.warn("Status from request %d, but response contains status %d",e.status,t.status),t},t.exports=a},{"../core/Events":4,"../helpers/LikeFormData":9,"../helpers/tools":11}],2:[function(e,t,s){"use strict";var o=function(){};o.prototype.init=function(e,t,s){this.sf=e,this.node=t,this.options=Object.assign(this.grabOptions(t),s)},o.prototype.optionsToGrab={},o.prototype.grabOptions=function(e){var t,s,o={};for(var n in this.optionsToGrab)t=null,this.optionsToGrab.hasOwnProperty(n)&&(s=this.optionsToGrab[n],s.hasOwnProperty("value")&&(t=s.value),this.sf.options.instances[this.name]&&this.sf.options.instances[this.name].hasOwnProperty(n)&&(t=this.sf.options.instances[this.name][n]),s.hasOwnProperty("domAttr")&&e.attributes.hasOwnProperty(s.domAttr)&&(t=e.attributes[s.domAttr].value),s.hasOwnProperty("processor")&&(t=s.processor.call(this,e,t,s)),null!==t&&(o[n]=t));return o},o.prototype.getAddon=function(e,t){return this.spiral.instancesController.getInstanceAddon(this.name,e,t)},t.exports=o},{}],3:[function(e,t,s){"use strict";var o=function(e){if(!e)return void console.error("You should provide instancesController  for DOM Mutation. Because DOM Mutation  should known all classes and");if(!this.constructor)return void console.error("Please call DomMutations with new  - 'new DomMutations()' ");this.instancesController=e;var t={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0,attributeOldValue:!0,attributeFilter:["class"]},s=this;this.observer=new MutationObserver(function(){s.onDomMutate.apply(s,arguments)}),this.observer.observe(document,t)};o.prototype.onDomMutate=function(e){var t=this.instancesController.getClasses(),s="."+t.join(",.");return 1===s.length?!1:(e.forEach(function(e){switch(e.type){case"attributes":this.processMutationAttributes(e,t);break;case"characterData":break;case"childList":this.processMutationChildList(e.addedNodes,"addInstance",s,t),this.processMutationChildList(e.removedNodes,"removeInstance",s,t);break;case"default":console.error("Something wrong. Contact tech support")}},this),!0)},o.prototype.processMutationAttributes=function(e,t){var s=this,o=e.target.className.split(" "),n=e.oldValue?e.oldValue.split(" "):[],r=o.filter(function(e){return-1===n.indexOf(e)}),a=n.filter(function(e){return-1===o.indexOf(e)}),i=r.filter(function(e){return-1!==t.indexOf(e)}),c=a.filter(function(e){return-1!==t.indexOf(e)});c.forEach(function(t){s.instancesController.removeInstance(s.instancesController.getInstanceNameByCssClass(t),e.target)}),i.forEach(function(t){s.instancesController.addInstance(s.instancesController.getInstanceNameByCssClass(t),e.target)})},o.prototype.processMutationChildList=function(e,t,s,o){function n(e){o.forEach(function(s){e.classList.contains(s)&&r.instancesController[t](r.instancesController.getInstanceNameByCssClass(s),e)})}var r=this;[].forEach.call(e,function(e){return 1!==e.nodeType||"SCRIPT"===e.nodeName||"LINK"===e.nodeName?!1:(n(e),[].forEach.call(e.querySelectorAll(s),n),!0)})},o.prototype.stopObserve=function(){this.observer.disconnect()},t.exports=o},{}],4:[function(e,t,s){"use strict";var o=function(e){this._storage={},this._allowedEvents=e};o.prototype.on=function(e,t){var s=e.replace(/\s{2,}/g," ").split(" ");s.forEach(function(s){return this._allowedEvents&&-1===this._allowedEvents.indexOf(s)?void console.warn("Events. Try to register event %s, but event is not allowed",s):(this._storage.hasOwnProperty(e)||(this._storage[s]=[]),void this._storage[s].push(t))},this)},o.prototype.registerAction=o.prototype.on,o.prototype.off=function(e,t){alert("You try to remove action. This part is incomplete")},o.prototype.trigger=function(e,t){if(this._allowedEvents&&-1===this._allowedEvents.indexOf(e))return void console.warn("Events. Try to trigger event %s, but event is not allowed",e);if(this._storage.hasOwnProperty(e))for(var s=0,o=this._storage[e].length;o>s;s++)this._storage[e][s](t)},o.prototype.performAction=o.prototype.trigger,t.exports=o},{}],5:[function(e,t,s){"use strict";var o=function(e){return this.spiral=e,this.constructor?void(this._storage={instancesConstructors:{cssClasses:{},jsConstructors:{}},addons:{},instances:{}}):void console.error("Please call InstancesController with new  - 'new InstancesController()' ")};o.prototype.registerInstanceType=function(e,t,s){var o=e.prototype.name;if(o||console.error("Instance constructor should have name inside it"),this._storage.instancesConstructors.jsConstructors.hasOwnProperty(o))return void console.error("Instance Constructor for type '%s' already added. Skipping",o);if(t&&(this._storage.instancesConstructors.cssClasses[t]=o),this._storage.instancesConstructors.jsConstructors[o]=e,this._storage.instances[o]=[],!s)for(var n=document.getElementsByClassName(t),r=0,a=n.length;a>r;r++)this.addInstance(o,n[r])},o.prototype.addInstanceType=function(e,t,s){return console.warn("addInstanceType is deprecated. Please use registerInstanceType instead"),this.registerInstanceType(t,s)},o.prototype.addInstance=function(e,t,s){var o=this._storage.instancesConstructors.jsConstructors[e],n=this.getInstance(e,t);if(!o||n)return!1;var r=new o(this.spiral,t,s);return this._storage.instances[e].push({node:t,instance:r}),r},o.prototype.removeInstance=function(e,t){var s,o=this.getInstance(e,t,!0);return o?(o.instance.die(),s=this._storage.instances[e].indexOf(o),-1!==s&&this._storage.instances[e].splice(s,1),!0):!1},o.prototype.getInstance=function(e,t,s){var o=this._storage.instances[e],n=!1;if(!o)return!1;if(t=t instanceof HTMLElement?t:document.getElementById(t),!t)return!1;for(var r=0,a=o.length;a>r;r++)if(o[r].node===t){n=s?o[r]:o[r].instance;break}return n},o.prototype.registerAddon=function(e,t,s,o){return this._storage.addons.hasOwnProperty(t)||(this._storage.addons[t]={}),this._storage.addons[t].hasOwnProperty(s)||(this._storage.addons[t][s]={}),this._storage.addons[t][s].hasOwnProperty(o)?void console.error("The %s addon type %s already registered for instance %s! Skipping registration.",o,s,t):void(this._storage.addons[t][s][o]=e)},o.prototype.getInstanceAddon=function(e,t,s){return this._storage.addons.hasOwnProperty(e)&&this._storage.addons[e].hasOwnProperty(t)&&this._storage.addons[e][t].hasOwnProperty(s)?this._storage.addons[e][t][s]:!1},o.prototype.getClasses=function(){return Object.keys(this._storage.instancesConstructors.cssClasses)},o.prototype.getInstanceNameByCssClass=function(e){return this._storage.instancesConstructors.cssClasses[e]},o.prototype.getInstanceConstructors=function(e){},t.exports=o},{}],6:[function(e,t,s){"use strict";t.exports=function(e){e.ajax.events.on("load",function(t){var s=t.response;if(s.hasOwnProperty("action"))if("string"==typeof s.action)e.events.trigger(s.action);else if("object"==typeof s.action){var o=Object.keys(s.action);1===o.length?e.events.trigger(o[0],s.action[o[0]],t):2===o.length&&s.action.delay?setTimeout(function(){var n=o.filter(function(e){return"delay"!==e})[0];e.events.trigger(n,s.action[n],t)},+s.action.delay):o.length>1?setTimeout(function(){e.events.trigger(s.action.name,s.action,t)},+s.action.delay||0):console.error("Action from server. Object doesn't have keys. ",s.action)}else console.error("Action from server. Something wrong. ",s.action)})}},{}],7:[function(e,t,s){t.exports=function(e){e.on("redirect",function(e){var t="[object String]"===Object.prototype.toString.call(e)?e:e.url;window.location[/^(?:[a-z]+:)?\/\//i.test(t)?"href":"pathname"]=t}),e.on("reload",function(){location.reload()}),e.on("refresh",function(){e.trigger("reload")}),e.on("close",function(){window.close()})}},{}],8:[function(e,t,s){"use strict";var o=function(){this._DOMEventsStorage=[]};o.prototype.add=function(e){"[object Array]"!==Object.prototype.toString.call([])&&(e=[e]),e.forEach(function(e){e.useCapture=!!e.useCapture,e.DOMNode.addEventListener(e.eventType,e.eventFunction,e.useCapture),this._DOMEventsStorage.push(e)},this)},o.prototype.remove=function(e){console.warn("TODO IMPLEMENT")},o.prototype.removeAll=function(){this._DOMEventsStorage.forEach(function(e){e.DOMNode.removeEventListener(e.eventType,e.eventFunction,e.useCapture)}),this._DOMEventsStorage=[]},t.exports=o},{}],9:[function(e,t,s){"use strict";var o=function(e,t){this.data={},e&&("[object Object]"!==Object.prototype.toString.call(e)?console.warn("LikeFormData can't accept non Object. Please reefer to documentation. Problem parameter is:",e):this.data=e),this.boundary=t?t:"SpiralFormData-"+Math.random().toString().substr(2)};o.prototype.append=function(e,t){this.data[e]=t},o.prototype.toString=function(){var e="",t=this.boundary,s=function(o,n){for(var r in o)o.hasOwnProperty(r)&&"undefined"!=typeof o[r]&&("object"==typeof o[r]?s(o[r],0===n.length?r:n+"["+r+"]"):e+="--"+t+"\r\nContent-Disposition: form-data; name="+(0===n.length?r:n+"["+r+"]")+"\r\n\r\n"+o[r]+"\r\n")};return"object"!=typeof this.data&&(this.data={data:this.data}),s(this.data,""),e+="--"+this.boundary+"--\r\n"},o.prototype["delete"]=function(e){return delete this.data[e]},o.prototype.get=function(e){return this.data[e]},o.prototype.getAll=function(){return this.data},o.prototype.has=function(e){return this.data.hasOwnProperty(e)},o.prototype.set=function(e){this.data[key]=e},o.prototype.getContentTypeHeader=function(){return"multipart/form-data; charset=utf-8; boundary="+this.boundary},t.exports=o},{}],10:[function(e,t,s){t.exports={closest:function(e,t){t="string"==typeof t?[t]:t;for(var s,o=t.length,n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&e.parentNode;){for(s=0;o>s;s++)if(n.call(e,t[s]))return e;e=e.parentNode}return!1},closestByClassName:function(e,t){t="string"==typeof t?[t]:t;for(var s,o=t.length;e&&e.parentNode;){for(s=0;o>s;s++){var n=new RegExp("(\\s|^)"+t[s]+"(\\s|$)");if(e.className.match(n))return e}e=e.parentNode}return!1}}},{}],11:[function(e,t,s){"use strict";var o={extend:function(){for(var e,t={},s=0;s<arguments.length;s++)if("[object Object]"===Object.prototype.toString.call(arguments[s]))for(e in arguments[s])t[e]=arguments[s][e];else console.warn("Merging allowed only for objects. Passed value:",arguments[s]);return t}};t.exports=o},{}],12:[function(e,t,s){"use strict";function o(e,t,s,r){for(var a in t)if(t.hasOwnProperty(a)){var i=r?r+"["+a+"]":a,c=Object.prototype.toString.call(t[a]),l="[name='"+i+"']";switch(c){case"[object Object]":o(e,t[a],s,i);break;case"[object Array]":t[a].forEach(function(t){var o="[name='"+i+"[]'][value='"+t+"']",r=e.querySelectorAll(o);0===r.length&&(console.warn(o," in Array not found"),n.push(o));for(var a=0,c=r.length;c>a;a++)s(r[a],!0)});break;case"[object String]":case"[object Number]":var u=e.querySelectorAll(l);if(0===u.length){console.warn(l," not found");var p={};p[i]=t[a],n.push(p)}for(var d=0,h=u.length;h>d;d++)s(u[d],t[a]);break;default:console.error("unknown type -",c," and message",t[a])}}}var n=[],r=function(e,t,s,r){return n=[],o(e,t,s,r),0!==n.length&&console.log("Some element not found in form",n),n};t.exports=r},{}],13:[function(e,t,s){"use strict";e("./shim/console"),e("./shim/Object.assign");var o;o="undefined"!=typeof sf&&"[object Object]"===Object.prototype.toString.call(sf)?Object.assign(sf,e("./sf")):e("./sf"),o.hasOwnProperty("options")||(o.options={instances:{}}),o.options.hasOwnProperty("instances")||(o.options.instances={}),window.hasOwnProperty("sf")||(window.sf=o),o.instancesController=new o.core.InstancesController(sf),o.domMutation=new o.core.DomMutations(o.instancesController),o.events=new o.core.Events,e("./core/events/baseEvents.js")(o.events),o.ajax=new o.core.Ajax(window.csrfToken?{headers:{"X-CSRF-Token":window.csrfToken}}:null),e("./core/ajax/baseActions.js")(o),o.tools.iterateInputs=e("./helpers/tools/iterateInputs.js"),o.modules.helpers.tools.iterateInputs=o.tools.iterateInputs,e("./vendor/formToObject"),e("./instances/form/Form.js"),e("./instances/lock/Lock.js"),"object"==typeof s&&s&&(t.exports=o)},{"./core/ajax/baseActions.js":6,"./core/events/baseEvents.js":7,"./helpers/tools/iterateInputs.js":12,"./instances/form/Form.js":14,"./instances/lock/Lock.js":16,"./sf":17,"./shim/Object.assign":18,"./shim/console":19,"./vendor/formToObject":20}],14:[function(require,module,exports){"use strict";!function(sf){var formMessages=require("./formMessages"),Form=function(e,t,s){this._construct(e,t,s)};Form.prototype=Object.create(sf.modules.core.BaseDOMConstructor.prototype),Form.prototype.name="form",Form.prototype._construct=function(e,t,s){this.init(e,t,s),this.mixMessagesOptions(),this.DOMEvents=new this.sf.modules.helpers.DOMEvents,this.addEvents(),this.events=new this.sf.modules.core.Events(["beforeSend","success","error","always"])},Form.prototype.optionsToGrab={context:{processor:function(e,t){return e}},self:{processor:function(e,t){return this}},url:{domAttr:"action",value:"/"},method:{domAttr:"method",value:"POST"},lockType:{value:"default",domAttr:"data-lockType"},messagesType:{value:"spiral",domAttr:"data-messagesType"},messages:{value:"",domAttr:"data-messages",processor:function(e,t,s){if(!t)return this.value;if("string"==typeof t)try{t=JSON.parse(t)}catch(o){console.error("Form JSON.parse error: ",o)}return Object.assign(s.value,t)}},useAjax:{value:!0,domAttr:"data-useAjax",processor:function(e,t){return"boolean"==typeof t?t:(t=void 0!==t&&null!==t?t.toLowerCase():"","false"===t?t=!1:"true"===t&&(t=!0),t)}},ajaxCallback:{value:!1,domAttr:"data-callback"},beforeSubmitCallback:{value:!1,domAttr:"data-before-submit"},afterSubmitCallback:{value:!1,domAttr:"data-after-submit"},headers:{value:{Accept:"application/json"},domAttr:"data-headers",processor:function(e,t,s){if(void 0===t||null==t)return this.value;if("string"==typeof t)try{t=JSON.parse(t)}catch(o){console.error("Form JSON.parse error: ",o)}return Object.assign(s.value,t)}}},Form.prototype.mixMessagesOptions=function(){var e=this.sf.options.instances.form;this.options.messages=Object.assign({},formMessages.defaults,e&&e.messages&&e.messages[this.options.messagesType],this.options.messages)},Form.prototype.onSubmit=function(e){return this.sf.instancesController.getInstance("lock",this.node)?(e.preventDefault(),void e.stopPropagation()):(this.removeMessages(),this.options.data=this.getFormData(),window.FormData||0===this.options.context.querySelectorAll("input[type='file']").length||(this.options.useAjax=!1),this.events.trigger("beforeSend",this.options),void(this.options.useAjax&&(this.send(this.options),e.preventDefault(),e.stopPropagation())))},Form.prototype.lock=function(e){this.options.lockType&&"none"!==this.options.lockType&&(e?this.sf.instancesController.removeInstance("lock",this.node)||console.warn("You try to remove 'lock' instance, but it is not available or not started"):this.sf.instancesController.addInstance("lock",this.node,{type:this.options.lockType})||console.warn("You try to add 'lock' instance, but it is not available or already started"))},Form.prototype.showFormMessage=formMessages.showFormMessage,Form.prototype.showFieldMessage=formMessages.showFieldMessage,Form.prototype.showFieldsMessages=formMessages.showFieldsMessages,Form.prototype.showMessages=formMessages.showMessages,Form.prototype.removeMessages=formMessages.removeMessages,Form.prototype.removeMessage=formMessages.removeMessage,Form.prototype.processAnswer=function(e){this.options.messagesType&&this.showMessages(e)},Form.prototype.send=function(sendOptions){var that=this;if(this.lock(),sendOptions.beforeSubmitCallback){var fn=eval(sendOptions.beforeSubmitCallback);"function"==typeof fn&&fn.call(sendOptions)}this.sf.ajax.send(sendOptions).then(function(e){return that.events.trigger("success",sendOptions),e},function(e){return that.events.trigger("error",sendOptions),e}).then(function(e){that.lock(!0),that.processAnswer(e),that.events.trigger("always",sendOptions)})},Form.prototype.getFormData=function(){return window.FormData?new FormData(this.options.context):(console.log("Form `"+this.options.context+"` were processed without FormData."),new formToObject(this.options.context))},Form.prototype.setOptions=function(e){this.options=this.sf.modules.helpers.tools.extend(this.options,e)},Form.prototype.addEvents=function(){var e=this;this.DOMEvents.add([{DOMNode:this.options.context,eventType:"submit",eventFunction:function(t){e.onSubmit.call(e,t)}}])},Form.prototype.die=function(){this.DOMEvents.removeAll()},sf.instancesController.registerInstanceType(Form,"js-sf-form")}(sf)},{"./formMessages":15}],15:[function(e,t,s){"use strict";function o(e,t){return"[object Object]"!==Object.prototype.toString.call(e)&&(e={text:e,type:t}),e.text=e.text||e.message||e,e.type=e.type||t,e}var n=e("../../helpers/tools/iterateInputs"),r=e("../../helpers/domTools"),a={template:'<div class="alert form-msg ${type}"><button class="btn-close">×</button><div class="msg">${text}</div></div>',close:".btn-close",place:"bottom",levels:{success:"success",info:"info",warning:"warning",danger:"danger"},field:".item-form",fieldTemplate:'<span class="msg">${text}<button class="btn-close">×</button></span>',fieldClose:".btn-close",fieldPlace:"bottom",fieldPrefix:""};a.levels.message=a.levels.success,a.levels.debug=a.levels.success,a.levels.info=a.levels.notice=a.levels.info,a.levels.error=a.levels.critical=a.levels.alert=a.levels.emergency=a.levels.danger,t.exports={defaults:a,showMessages:function(e){if(e){var t=!1,s=this;for(var o in this.options.messages.levels)e[o]&&(this.showFormMessage(e[o],this.options.messages.levels[o]),t=!0);if(e.messages&&(this.showFieldsMessages(e.messages,"success"),t=!0),e.errors&&(this.showFieldsMessages(e.errors,"danger"),t=!0),e.warnings&&(this.showFieldsMessages(e.warnings,"warning"),t=!0),!t){var n=e.status?e.status+" ":"";n+=e.statusText?e.statusText:"",n+=e.data&&!e.statusText?e.data:"",n+=0===n.length?e:"",this.showFormMessage(n,"error")}this._messages.forEach(function(e){e.close&&(e.closeHandler=s.removeMessage.bind(s,e),e.close.addEventListener("click",e.closeHandler))})}},removeMessage:function(e,t){e.close&&e.close.removeEventListener("click",e.closeHandler),e.el.parentNode.removeChild(e.el),e.field&&e.field.classList.remove(this.options.messages.fieldPrefix+e.type),t&&(t.preventDefault&&t.preventDefault(),this._messages.splice(this._messages.indexOf(e),1))},removeMessages:function(){var e=this;this._messages&&this._messages.forEach(function(t){e.removeMessage(t,!1)}),e._messages=[]},showFormMessage:function(e,t){e=o(e,t);var s,n,r=this.options.messages.template,a=new DOMParser;for(var i in e){if(!e.hasOwnProperty(i))return;r=r.replace("${"+i+"}",e[i])}s=a.parseFromString(r,"text/html").firstChild.lastChild.firstChild,"bottom"===this.options.messages.place?this.node.appendChild(s):"top"===this.options.messages.place?this.node.insertBefore(s,this.node.firstChild):(n=document.querySelector(this.options.messages.place),n.appendChild(s)),this._messages.push({el:s,close:s.querySelector(this.options.messages.close)})},showFieldMessage:function(e,t,s){var n,a=r.closest(e,this.options.messages.field),i=this.options.messages.fieldTemplate;if(a){var c=new DOMParser;t=o(t,s),a.classList.add(this.options.messages.fieldPrefix+s);for(var l in t){if(!t.hasOwnProperty(l))return;i=i.replace("${"+l+"}",t[l])}n=c.parseFromString(i,"text/html").firstChild.lastChild.firstChild,"bottom"===this.options.messages.fieldPlace?a.appendChild(n):"top"===this.options.messages.fieldPlace?a.insertBefore(n,a.firstChild):(a=a.querySelector(this.options.messages.fieldPlace),a.appendChild(n)),this._messages.push({el:n,close:n.querySelector(this.options.messages.fieldClose),field:a,type:s})}},showFieldsMessages:function(e,t){var s=this;n(this.node,e,function(e,o){s.showFieldMessage(e,o,t)})}}},{"../../helpers/domTools":10,"../../helpers/tools/iterateInputs":12}],16:[function(e,t,s){"use strict";!function(e){var t=function(e,t,s){this._construct(e,t,s)};t.prototype=Object.create(e.modules.core.BaseDOMConstructor.prototype),t.prototype.name="lock",t.prototype._construct=function(e,t,s){this.init(e,t,s),this.add(this.options.type,this.node)},t.prototype.add=function(e,t){if(!this.types.hasOwnProperty(e))return!1;var s=document.createElement("div");return s.className=this.types[e].className||"js-sf-lock",s.innerHTML=this.types[e].html,t.appendChild(s),t.classList.add("locked"),this.types[e].progress},t.prototype.die=function(){this.remove()},t.prototype.remove=function(){this.node.classList.remove("locked");var e=this.node.querySelector(".js-sf-lock");return e&&this.node.removeChild(e),!0},t.prototype.types={spinner:{html:'<div class="sf-spinner"></div>'},progress:{html:'<div class="sf-progress"><div class="progress-line"></div></div>',progress:function(e,t){var s=this.context.getElementsByClassName("progress-line")[0];s.style.width=100*(e/t)+"%"}}},t.prototype.types["default"]=t.prototype.types.spinner,e.instancesController.registerInstanceType(t)}(sf)},{}],17:[function(e,t,s){var o={Ajax:e("./core/Ajax"),BaseDOMConstructor:e("./core/BaseDOMConstructor"),DomMutations:e("./core/DomMutations"),Events:e("./core/Events"),InstancesController:e("./core/InstancesController")},n={DOMEvents:e("./helpers/DOMEvents"),domTools:e("./helpers/domTools"),LikeFormData:e("./helpers/LikeFormData"),tools:e("./helpers/tools")},r={core:o,helpers:n,tools:n.tools,modules:{WILL_BE_DEPRECATED:!0,core:o,helpers:n}};t.exports=r},{"./core/Ajax":1,"./core/BaseDOMConstructor":2,"./core/DomMutations":3,"./core/Events":4,"./core/InstancesController":5,"./helpers/DOMEvents":8,"./helpers/LikeFormData":9,"./helpers/domTools":10,"./helpers/tools":11}],18:[function(e,t,s){"function"!=typeof Object.assign&&!function(){Object.assign=function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),s=1;s<arguments.length;s++){var o=arguments[s];if(void 0!==o&&null!==o)for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])}return t}}()},{}],19:[function(e,t,s){!function(){for(var e,t=function(){},s=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],o=s.length,n=window.console=window.console||{};o--;)e=s[o],n[e]||(n[e]=t)}()},{}],20:[function(e,t,s){!function(){var e=function(e){return e?(this.formRef=e,this.keyRegex=/[^\[\]]+/g,this.$form=null,this.$formElements=[],this.formObj={},this.setForm()&&this.setFormElements()?this.setFormObj():!1):!1};e.prototype.setForm=function(){switch(typeof this.formRef){case"string":this.$form=document.getElementById(this.formRef);break;case"object":this.isDomNode(this.formRef)&&(this.$form=this.formRef)}return this.$form},e.prototype.setFormElements=function(){return this.$formElements=this.$form.querySelectorAll("input, textarea, select"),this.$formElements.length},e.prototype.isDomNode=function(e){return"object"==typeof e&&"nodeType"in e&&1===e.nodeType},e.prototype.forEach=function(e,t){if([].forEach)return[].forEach.call(e,t);var s;for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(e,e[s])},e.prototype.addChild=function(e,t,s,o){if(1===s.length){if("INPUT"===t.nodeName&&"radio"===t.type)return t.checked?e[s]=o:void 0;if("INPUT"===t.nodeName&&"checkbox"===t.type)return t.checked?(e[s]||(e[s]=[]),e[s].push(o)):void 0;if("SELECT"===t.nodeName&&"select-multiple"===t.type){e[s]=[];var n=t.querySelectorAll("option[selected]");return void(n&&this.forEach(n,function(t){e[s].push(t.value)}))}e[s]=o}return s.length>1?(e[s[0]]||(e[s[0]]={}),this.addChild(e[s[0]],t,s.splice(1,s.length),o)):e},e.prototype.setFormObj=function(){var e,t=0;for(t=0;t<this.$formElements.length;t++)this.$formElements[t].name&&!this.$formElements[t].disabled&&(e=this.$formElements[t].name.match(this.keyRegex),this.addChild(this.formObj,this.$formElements[t],e,this.$formElements[t].value));return this.formObj},"function"==typeof define&&define.amd?define(function(){return e}):window.formToObject=e}()},{}]},{},[13]);
//# sourceMappingURL=sf.min.js.map
